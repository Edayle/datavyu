; MacSHAPA Open Database( setf macshapa-db '(    ( HEADER>      (        ( NAME> "OQL_Mod_Test_01.odb" )        ( VERSION> 1 )        ( DEBUG-LEVEL> 0 )        ( MAX-ERRORS> 1 )        ( MAX-WARNINGS> 1 )      )    )    ( USER>      (        ( PREDICATE-DEFINITIONS>          (            ( |comment| ( ( VARIABLE-LENGTH> FALSE ) ( FORMAL-ARG-LIST> ( |<text>| ) ) ) )            ( |junk| ( ( VARIABLE-LENGTH> FALSE ) ( FORMAL-ARG-LIST> ( |<arg_1>| |<arg2>| ) ) ) )          )        )        ( SPREADSHEET-VARIABLE-DECLARATIONS>          (            ( |float_1|              (                ( TYPE> <<FLOAT>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |matrix_1|              (                ( TYPE> <<MATRIX>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |int_2|              (                ( TYPE> <<INTEGER>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |pred_1|              (                ( TYPE> <<PREDICATE>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |text_1|              (                ( TYPE> <<TEXT>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |nom_1|              (                ( TYPE> <<NOMINAL>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |matrix_2|              (                ( TYPE> <<MATRIX>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )            ( |int_1|              (                ( TYPE> <<INTEGER>> )                ( VARIABLE-LENGTH> FALSE )                ( FORMAL-ARG-LIST> ( |<ord>| |<onset>| |<offset>| |<val>| ) )                ( COLUMN-WIDTH> 200 )              )            )          )        )        ( SPREADSHEET-VARIABLE-DEFINITIONS>          (            ( |float_1|              (                ( CELLS>                  (                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| 10.000000 )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| 20.000000 )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| 30.000000 )                    )                  )                )              )            )            ( |matrix_1|              (                ( CELLS>                  (                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| |Hello World| )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "gymbal" )                    )                    (                      ( ONSET> 60 )                      ( OFFSET> 120 )                      ( |<val>| "gumball" )                    )                    (                      ( ONSET> 2160000 )                      ( OFFSET> 2160001 )                      ( |<val>| "gyre" )                    )                    (                      ( ONSET> 2416271 )                      ( OFFSET> 0 )                      ( |<val>| 3.141590 )                    )                    (                      ( ONSET> 4320000 )                      ( OFFSET> 6480000 )                      ( |<val>| |Twas| )                    )                  )                )                ( VOCAB> ( ) )              )            )            ( |int_2|              (                ( CELLS>                  (                  )                )              )            )            ( |pred_1|              (                ( CELLS>                  (                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| ( |junk| "Hello World" |<arg2>| ) )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| ( |junk| 1.000000 |Twas| ) )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| ( |junk| 1 ( TIME> 2 ) ) )                    )                  )                )                ( VOCAB> ( |junk| ) )              )            )            ( |text_1|              (                ( CELLS>                  (                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "gum" )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "Hello" )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "Twas brillig, and the slithey toves" )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "Did gyre and gymbal in the wabe." )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "All mimsey were the borrowgroves," )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| "And the momraths outgabe." )                    )                  )                )              )            )            ( |nom_1|              (                ( CELLS>                  (                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| |<val>| )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| |Alpha| )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| |Bravo| )                    )                    (                      ( ONSET> 0 )                      ( OFFSET> 0 )                      ( |<val>| |Charlie| )                    )                  )                )              )            )            ( |matrix_2|              (                ( CELLS>                  (                    (                      ( ONSET> 60 )                      ( OFFSET> 61 )                      ( |<val>| 1 )                    )                    (                      ( ONSET> 120 )                      ( OFFSET> 121 )                      ( |<val>| 1.000000 )                    )                    (                      ( ONSET> 180 )                      ( OFFSET> 181 )                      ( |<val>| ( TIME> 1 ) )                    )                  )                )                ( VOCAB> ( ) )              )            )            ( |int_1|              (                ( CELLS>                  (                    (                      ( ONSET> 60 )                      ( OFFSET> 120 )                      ( |<val>| 1 )                    )                    (                      ( ONSET> 120 )                      ( OFFSET> 180 )                      ( |<val>| 2 )                    )                    (                      ( ONSET> 180 )                      ( OFFSET> 240 )                      ( |<val>| 3 )                    )                  )                )              )            )          )        )      )    )    ( QUERY>      (        ( |comment| "Test the substring() and sum() predicates, and the printing of negative times:" )         ()         ( |comment| "************ test the substring() predcate ********************" )         ( |comment| "should print all strings in text_1 containing 'brillig':" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| "brillig" |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "should print all strings in text_1, as any string is a substring of itself:" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| |?s| |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "should print all strings in text_1, as the empty string is a substring of any string:" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| "" |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "should print all pairs of strings in text_1 and matrix_1 such that the string in text_1 contains the string in matrix_1:" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s1| ) ( |matrix_1| |<ord>| |<onset>| |<offset>| |?s2| ) ( |substring| |?s2| |?s1| ) ) ( |print| |?s1| |?s2| ) )         ()         ()         ( |comment| "********************* test handling of negative times ********************" )         ( |comment| "Test printing of negative times:" )         ( |query| ( |matrix_1| |<ord>| |?onset| |?offset| |<val>| ) ( |print| ( |minus| |?offset| |?onset| ) ) )         ()         ( |comment| "Verify that the insert predicate will not permit the insertion of negative times in the onset or offset of a varcell:" )         ( |query| ( |int_1| |?ord| |?onset| |?offset| |?val| ) ( |insert| ( |int_2| |?ord| ( |times| |?onset| -1 ) ( |times| |?offset| -1 ) ( |times| |?val| -1 ) ) ) )         ()         ()         ( |comment| "*********************** test the sum() predicate ***********************" )         ( |comment| "Verify that the sum predicate doesn't choke on non-numerical arguments:" )         ( |query| ( |matrix_1| |<ord>| |<onset>| |<offset>| |?sum| ) ( |sum| |?sum| ) )         ()         ( |comment| "Verify that the sum predicate handles computed values of integer, time and float type correctly:" )         ( |comment| "Should return 63.0:" )         ( |query| ( |float_1| |<ord>| |<onset>| |<offset>| |?sum| ) ( |sum| ( |plus| |?sum| 1.000000 ) ) )         ()         ( |comment| "Should return -3:" )         ( |query| ( |int_1| |<ord>| |<onset>| |<offset>| |?add| ) ( |sum| ( |plus| |?add| -3 ) ) )         ()         ( |comment| "Should return -01:11:10:10:" )         ( |query| ( |matrix_1| |<ord>| |?onset| |?offset| |<val>| ) ( |sum| ( |minus| |?offset| |?onset| ) ) )         ()         ( |comment| "should return 3.0:" )         ( |query| ( |matrix_2| |<ord>| |<onset>| |<offset>| |?val| ) ( |sum| |?val| ) )         ()         ( |comment| "should return 00:00:00:02:" )         ( |query| ( |and| ( |matrix_2| |<ord>| |?onset| |<offset>| |?val| ) ( |ne| |?onset| ( TIME> 120 ) ) ) ( |sum| |?val| ) )         ()         ()         ( |comment| "************************** further tests for the substring() predicate *******************************" )         ( |comment| "test substring() on arguments from a matrix:" )         ( |query| ( |and| ( |matrix_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| "gym" |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "test substring() on arguments from a text variable:" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| |brillig| |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "test substring() on arguments from a nominal variable:" )         ( |query| ( |and| ( |nom_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| "Brav" |?s| ) ) ( |print| |?s| ) )         ( |query| ( |and| ( |nom_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| |Alp| |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "test substring() on arguments extracted from the argument list of a predicate:" )         ( |query| ( |and| ( |pred_1| |<ord>| |<onset>| |<offset>| ( |junk| |<arg_1>| |?s| ) ) ( |substring| "" |?s| ) ) ( |print| |?s| ) )         ()         ( |comment| "Now try to break the substring() predicate with invalid arguments:" )         ( |query| ( |and| ( |text_1| |<ord>| |<onset>| |<offset>| |?s| ) ( |substring| |<substr>| |?s| ) ) ( |print| |?s| ) )         ( |query| ( |and| ( |matrix_1| |<ord>| |<onset>| |<offset>| |?x| ) ( |text_1| |<ord>| |<onset>| |<offset>| |?y| ) ( |substring| |?y| |?x| ) ) ( |print| |?y| |?x| ) )         ( |query| ( |and| ( |pred_1| |<ord>| |<onset>| |<offset>| ( |junk| |?x| |<arg2>| ) ) ( |matrix_1| |<ord>| |<onset>| |<offset>| |?y| ) ( |substring| |?x| |?y| ) ) ( |print| |?y| |?x| ) )       )    )    ( SYSTEM>      (        ( SHAPA-PANE-VARS>          (            |text_1|            |matrix_1|            |int_1|            |nom_1|            |int_2|            |float_1|            |matrix_2|            |pred_1|          )        )      )    )  ))